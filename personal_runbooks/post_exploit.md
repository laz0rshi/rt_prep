# Tunneling
<!--- Status 90% --->

## Introduction

This runbook provides a guide to information I want to collect after I get root or post system permisions. It is both for linux and windows.  Most of these steps are else where in the playbooks, but it is consolidated here as well.  It also includes steps you want to do in order to exfiltrate data and clear logs.

## Table of Content

- [Tunneling](#tunneling)
  - [Introduction](#introduction)
  - [Table of Content](#table-of-content)
  - [Password Dumps](#password-dumps)
    - [Mimikatz usage](#mimikatz-usage)
    - [wmic  See RTFMv2 pg 46](#wmic--see-rtfmv2-pg-46)
    - [Linux](#linux)
  - [Check home directories](#check-home-directories)
    - [Windows](#windows)
    - [Linux](#linux-1)
  - [Logs](#logs)
    - [Windows](#windows-1)
    - [Linux](#linux-2)
  - [Clean Up](#clean-up)

## Password Dumps

Active Directory Enumeration and Post Exploitation also has a complete guide, but these are some basics.
Dump the sam
Also look at linux password dumps

### Mimikatz usage

```cmd
# users passwords
sekurlsa::logonpasswords
# Hashdump
lsadump::sam
# SysKey to decrypt SECRETS entries
lsadump::secrets 
```

### wmic  See RTFMv2 pg 46

### Linux

```sh
cat /etc/shadow > shadow.hash
```

## Check home directories

### Windows

- Check files in all directories

```powershell
  Get-ChildItem -Path C:\Users\ -Include *.txt,*.pdf,*.xls,*.xlsx,*.doc,*.docx -File -Recurse -ErrorAction SilentlyContinue 
```

### Linux

- Check files in all directories

```sh
find / -type f -name -o -name "*.txt" -o -name "*.kdbx" -o -name "*.zip" 2>/dev/null
```

## Logs

### Windows

Windows Event Viewer
Include all users command history

### Linux

- Log files

```sh
cat /etc/*syslog*.conf |gr
ep -v "^#"
```
/var/log/<log type>

- History
Include all users command history

## Clean Up
<!-- Comming soon -- Not really needed for OSCP-->

- [ ] Evidence for report or proof
- [ ] Tunnels
- [ ] Persistance
- [ ] Covering Tracks


 <!--- Last Updated August 15, 2024 --->